[tox]
envlist = py{36,37}, py37-build_docs

[testenv]
setenv = 
    MPLBACKEND = agg
passenv = CC
extras = test
deps = 
    git+https://github.com/Cadair/astropy@dkist
    git+https://github.com/spacetelescope/asdf
    git+https://github.com/Cadair/gwcs@dkist
    git+https://github.com/sunpy/sunpy
    git+https://github.com/sunpy/ndcube
commands = pytest --cov=./dkist

[testenv:build_docs]
basepython = python3.7
extras = docs
commands = sphinx-build docs docs/_build/html -W -b html